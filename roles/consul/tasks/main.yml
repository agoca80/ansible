---
# roles/consul/tasks/main.yml
# https://www.digitalocean.com/community/tutorial_series/getting-started-with-consul

- name: ensure {{ consul_etc_dir }} exists
  file:
    path: "{{ consul_etc_dir }}"
    state: directory

- name: configure
  notify: consul restart
  template:
    src: cluster.json.j2
    dest: "{{ consul_etc_dir}}/cluster.json"
    owner: root
    group: "{{ root_group }}"
